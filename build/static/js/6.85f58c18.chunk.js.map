{"version":3,"sources":["components/seat.js","page/bookseat.js"],"names":["Seat","props","useState","bookingSeat","setbookingSeat","handlebookingSeat","handleSeatItem","seat","daDat","className","disabled","tenGhe","loaiGhe","onClick","TabPanel","children","value","index","other","role","hidden","id","aria-labelledby","Box","p","Typography","component","LinkTab","Tab","event","preventDefault","useStyles","makeStyles","theme","root","flexGrow","backgroundColor","palette","background","paper","connect","state","ticketRoom","Reducer","loading","dispatch","getTicketRoom","maLichChieu","action","postBookingSeat","listTicKetsAttachInFor","history","setLoadingTrue","countS","setCountS","countP","setCountP","classes","arrBookingSeat","setArrBookingSeat","useEffect","match","params","myInterval","setInterval","clearInterval","swal","then","window","location","reload","findIndex","item","maGhe","push","splice","console","log","AppBar","position","Tabs","variant","aria-label","label","undefined","arrSeat","danhSachGhe","map","key","renderSeat","type","slice","thongTinPhim","diaChi","tenCumRap","tenRap","tenPhim","ngayChieu","gioChieu","length","renderSTTNumberSeat","reduce","total","giaVe","renderAllPriceSeat","localStorage","getItem","Button","arrBookingSeatForAPI","taiKhoanNguoiDung","JSON","parse","taiKhoan","danhSachVe","data-toggle","data-target"],"mappings":"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","file":"static/js/6.85f58c18.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport { Fragment } from \"react\";\nexport default function Seat(props) {\n  const [bookingSeat, setbookingSeat] = useState(false);\n\n  const handlebookingSeat = () => {\n    setbookingSeat(!bookingSeat);\n    props.handleSeatItem(props.seat);\n  };\n  return (\n    <Fragment>\n      {props.seat.daDat === true ? (\n        <button className=\"btn btn-secondary\" disabled={props.seat.daDat}>\n          {props.seat.tenGhe}\n        </button>\n      ) : (\n        <Fragment>\n          {props.seat.loaiGhe === \"Thuong\" ? (\n            <button\n              className={\n                bookingSeat === false ? \"btn btn-dark\" : \"btn btn-success\"\n              }\n              onClick={handlebookingSeat}\n            >\n              {props.seat.tenGhe}\n            </button>\n          ) : (\n            <button\n              className={\n                bookingSeat === false ? \"btn btn-warning\" : \"btn btn-success\"\n              }\n              onClick={handlebookingSeat}\n            >\n              {props.seat.tenGhe}\n            </button>\n          )}\n        </Fragment>\n      )}\n    </Fragment>\n  );\n}\n","import React, { useEffect } from \"react\";\n//import { Fragment } from \"react\";\nimport { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport \"../components/styled-components/bookseat.css\";\nimport Button from \"@material-ui/core/Button\";\nimport * as action from \"../actions/index\";\nimport { connect } from \"react-redux\";\nimport Seat from \"../components/seat\";\nimport swal from \"sweetalert\";\nimport LazyLoadComponent from \"../components/lazyloadcomponent\";\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`nav-tabpanel-${index}`}\n      aria-labelledby={`nav-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box p={3}>\n          <Typography component={\"div\"}>{children}</Typography>\n        </Box>\n      )}\n    </div>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired,\n};\n\nfunction LinkTab(props) {\n  return (\n    <Tab\n      component=\"a\"\n      onClick={(event) => {\n        event.preventDefault();\n      }}\n      {...props}\n    />\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    backgroundColor: theme.palette.background.paper,\n  },\n}));\n\nfunction BookSeat(props) {\n  const [countS, setCountS] = useState(30);\n  const [countP, setCountP] = useState(3);\n  const classes = useStyles();\n  const [value, setValue] = useState(0);\n  const [arrBookingSeat, setArrBookingSeat] = useState([]);\n\n  useEffect(() => {\n    props.getTicketRoom(props.match.params.maLichChieu);\n\n    let myInterval = setInterval(() => {\n      setCountS((countS) => {\n        if (countS === 0) {\n          setCountP((countP) => {\n            if (countP > 0) {\n              return countP - 1;\n            } else {\n              setCountS(0);\n              setCountP(0);\n              clearInterval(myInterval);\n\n              swal(\"Hết Thời Gian Giữ Ghế\", \"\", \"warning\").then((value) => {\n                window.location.reload();\n              });\n            }\n          });\n\n          return 60;\n        } else return countS - 1;\n      });\n    }, 1000);\n    return () => {\n      clearInterval(myInterval);\n      props.setLoadingTrue();\n    };\n  }, []);\n\n  const handleSeatItem = (seat) => {\n    let bookingSeat = [...arrBookingSeat];\n\n    const index = bookingSeat.findIndex((item) => item.maGhe === seat.maGhe);\n    if (index === -1) {\n      bookingSeat.push(seat);\n\n      setArrBookingSeat(bookingSeat);\n    } else {\n      bookingSeat.splice(index, 1);\n      setArrBookingSeat(bookingSeat);\n    }\n  };\n  const renderSeat = () => {\n    if (props.ticketRoom !== undefined) {\n      let arrSeat = props.ticketRoom.danhSachGhe;\n\n      if (arrSeat !== undefined) {\n        return arrSeat.map((seat, index) => {\n          return (\n            <Seat key={index} seat={seat} handleSeatItem={handleSeatItem} />\n          );\n        });\n      }\n    }\n  };\n  const renderSTTNumberSeat = () => {\n    if (arrBookingSeat.length !== 0) {\n      return arrBookingSeat.map((seat, index) => {\n        return (\n          <span className=\"number-seat\" key={index}>\n            {seat.tenGhe},\n          </span>\n        );\n      });\n    }\n  };\n  const renderAllPriceSeat = () => {\n    if (arrBookingSeat.length !== 0) {\n      return arrBookingSeat.reduce((total, item) => {\n        return total + item.giaVe;\n      }, 0);\n    }\n  };\n  const handleBookingTickets = () => {\n    let arrBookingSeatForAPI = arrBookingSeat.map((item) => {\n      return { maGhe: item.maGhe, giaVe: item.maGhe };\n    });\n    let taiKhoanNguoiDung = JSON.parse(localStorage.getItem(\"user\")).taiKhoan;\n\n    let listTicKetsAttachInFor = {\n      maLichChieu: props.match.params.maLichChieu,\n      danhSachVe: arrBookingSeatForAPI,\n      taiKhoanNguoiDung: taiKhoanNguoiDung,\n    };\n    console.log(listTicKetsAttachInFor.danhSachVe.length);\n\n    if (listTicKetsAttachInFor.danhSachVe.length === 0) {\n      swal(\"Mời Chọn Ghế\", \"\", \"warning\");\n    } else {\n      props.postBookingSeat(listTicKetsAttachInFor, props.history);\n    }\n  };\n  console.log(props.loading);\n\n  if (props.loading) return <LazyLoadComponent />;\n  else\n    return (\n      <div className=\"book-seat\">\n        <div className={classes.root}>\n          <AppBar position=\"static\">\n            <Tabs\n              variant=\"fullWidth\"\n              value={value}\n              aria-label=\"nav tabs example\"\n            >\n              <LinkTab label=\"Đặt Vé & Thanh Toán\" />\n              <LinkTab label=\"Kết Quả Đặt Vé\" />\n            </Tabs>\n          </AppBar>\n          <TabPanel value={value} index={0}>\n            <div className=\"booking-seat\">\n              <div className=\"row\">\n                <div className=\"col-sm-9 hidden-seat d-flex justify-content-center\">\n                  <div className=\"width-870\">\n                    <div className=\"screen text-center\">SCREEN</div>\n                    <div className=\"style-char mt-3\">{renderSeat()}</div>\n                    <div className=\"type-seat mt-4\">\n                      <div className=\"d-inline-block ml-2 mr-2\">\n                        <button\n                          type=\"button\"\n                          className=\"btn btn-secondary\"\n                        ></button>\n                        <p>Đã Đặt</p>\n                      </div>\n                      <div className=\"d-inline-block  ml-2 mr-2\">\n                        <button\n                          type=\"button\"\n                          className=\"btn btn-success\"\n                        ></button>\n                        <p>Đang Chọn</p>\n                      </div>\n                      <div className=\"d-inline-block  ml-2 mr-2\">\n                        <button type=\"button\" className=\"btn btn-dark\"></button>\n                        <p>Chưa Chọn</p>\n                      </div>\n                      <div className=\"d-inline-block  ml-2 mr-2\">\n                        <button\n                          type=\"button\"\n                          className=\"btn btn-warning\"\n                        ></button>\n                        <p>Víp</p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"col-sm-3 detail-info-book\">\n                  <div className=\"time-booking-seat text-center\">\n                    Thời gian giữ ghế\n                    <p className=\"timelimit-bookseat\">\n                      {`0${countP}`.slice(-2)}:{`0${countS}`.slice(-2)}\n                    </p>\n                  </div>\n                  <div className=\"information-film\">\n                    {props.ticketRoom.thongTinPhim !== undefined ? (\n                      <div>\n                        <p>Địa Chỉ : {props.ticketRoom.thongTinPhim.diaChi}</p>\n                        <p>\n                          Tên Cụm Rạp :{\" \"}\n                          {props.ticketRoom.thongTinPhim.tenCumRap}\n                        </p>\n                        <p>Tên Rạp : {props.ticketRoom.thongTinPhim.tenRap}</p>\n                        <p>\n                          Tên Phim : {props.ticketRoom.thongTinPhim.tenPhim}\n                        </p>\n                        <p>\n                          Ngày Chiếu : {props.ticketRoom.thongTinPhim.ngayChieu}\n                        </p>\n                        <p>\n                          Giờ Chiếu : {props.ticketRoom.thongTinPhim.gioChieu}\n                        </p>\n                      </div>\n                    ) : (\n                      <div>\n                        <p>Địa Chỉ : </p>\n                        <p>Tên Cụm Rạp : </p>\n                        <p>Tên Rạp : </p>\n                        <p>Tên Phim : </p>\n                        <p>Ngày Chiếu : </p>\n                        <p>Giờ Chiếu : </p>\n                      </div>\n                    )}\n                  </div>\n                  <div className=\"all-seat\">\n                    Tổng Số Ghế Đã Chọn({arrBookingSeat.length})\n                  </div>\n                  <div className=\"info-cost-seat\">\n                    {arrBookingSeat.length > 0 ? (\n                      <div> Số Ghế : {renderSTTNumberSeat()}</div>\n                    ) : (\n                      \" Số Ghế :\"\n                    )}\n                  </div>\n                  <div className=\"total-seat\">\n                    {arrBookingSeat.length > 0 ? (\n                      <span> Tổng Tiền = {renderAllPriceSeat()} đ</span>\n                    ) : (\n                      \" Tổng Tiền = 0 đ\"\n                    )}\n                  </div>\n                  {localStorage.getItem(\"user\") ? (\n                    <Button\n                      variant=\"contained\"\n                      className=\"btn btn-primary book-ticket\"\n                      onClick={handleBookingTickets}\n                    >\n                      Đặt Vé\n                    </Button>\n                  ) : (\n                    <Button\n                      variant=\"contained\"\n                      className=\"btn btn-primary book-ticket\"\n                      data-toggle=\"modal\"\n                      data-target=\"#exampleModal\"\n                    >\n                      Đặt Vé\n                    </Button>\n                  )}\n                </div>\n              </div>\n            </div>\n          </TabPanel>\n          <TabPanel value={value} index={1}>\n            Page Two 6546345\n          </TabPanel>\n        </div>\n      </div>\n    );\n}\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    getTicketRoom: (maLichChieu) => {\n      dispatch(action.actGetTicketsRoomAPI(maLichChieu));\n    },\n    postBookingSeat: (listTicKetsAttachInFor, history) => {\n      dispatch(action.actBookingSeatAPI(listTicKetsAttachInFor, history));\n    },\n    setLoadingTrue: () => {\n      dispatch(action.actSetLoadingValueTrue());\n    },\n  };\n};\nconst mapStateToProps = (state) => {\n  return {\n    ticketRoom: state.Reducer.ticketRoom,\n    loading: state.Reducer.loading,\n  };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(BookSeat);\n"],"sourceRoot":""}